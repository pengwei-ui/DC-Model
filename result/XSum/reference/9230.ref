A drug-addicted doctor watched his wife lose consciousness and struggle for breath moments after injecting her with heroin in Edinburgh, a court has heard . 

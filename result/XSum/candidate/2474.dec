Harlequins director of rugby Conor O'Shea will leave the club at the end of the season . 
